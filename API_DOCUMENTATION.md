# üìö API Documentation - Online Library

## üöÄ –ë–∞–∑–æ–≤—ã–π URL
```
http://localhost:8000/api/
```

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üë• –ê–≤—Ç–æ—Ä—ã
- **GET** `/api/authors/` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–≤—Ç–æ—Ä–æ–≤
- **GET** `/api/authors/{id}/` - –î–µ—Ç–∞–ª–∏ –∞–≤—Ç–æ—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
- `nationality` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- `search` - –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏ –±–∏–æ–≥—Ä–∞—Ñ–∏–∏
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (name, birth_year)

**–ü—Ä–∏–º–µ—Ä:**
```bash
GET /api/authors/?nationality=Russian&search=–ü—É—à–∫–∏–Ω&ordering=name
```

### üè∑Ô∏è –ñ–∞–Ω—Ä—ã
- **GET** `/api/genres/` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∂–∞–Ω—Ä–æ–≤
- **GET** `/api/genres/{id}/` - –î–µ—Ç–∞–ª–∏ –∂–∞–Ω—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (name)

### üìñ –ö–Ω–∏–≥–∏
- **GET** `/api/books/` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥
- **GET** `/api/books/{id}/` - –î–µ—Ç–∞–ª–∏ –∫–Ω–∏–≥–∏ (—Å –æ—Ç–∑—ã–≤–∞–º–∏)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
- `author` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∞–≤—Ç–æ—Ä—É
- `genre` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É
- `publication_year` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –≥–æ–¥—É –∏–∑–¥–∞–Ω–∏—è
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∞–≤—Ç–æ—Ä—É, –æ–ø–∏—Å–∞–Ω–∏—é
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (title, publication_year, created_at)

**–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- **GET** `/api/books/popular/` - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–Ω–∏–≥–∏ (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç–∑—ã–≤–æ–≤)
- **GET** `/api/books/top_rated/` - –¢–æ–ø —Ä–µ–π—Ç–∏–Ω–≥–æ–≤—ã–µ –∫–Ω–∏–≥–∏
- **GET** `/api/books/search/` - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞:**
```bash
GET /api/books/search/?q=–≤–æ–π–Ω–∞&author=1&genre=2&min_rating=4.0
```

### ‚≠ê –û—Ç–∑—ã–≤—ã
- **GET** `/api/reviews/` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—Ç–∑—ã–≤–æ–≤
- **POST** `/api/reviews/` - –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤ (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- **GET** `/api/reviews/{id}/` - –î–µ—Ç–∞–ª–∏ –æ—Ç–∑—ã–≤–∞
- **PUT/PATCH** `/api/reviews/{id}/` - –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–∑—ã–≤
- **DELETE** `/api/reviews/{id}/` - –£–¥–∞–ª–∏—Ç—å –æ—Ç–∑—ã–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
- `book` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–Ω–∏–≥–µ
- `rating` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (created_at, rating)

**–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- **GET** `/api/reviews/my_reviews/` - –ú–æ–∏ –æ—Ç–∑—ã–≤—ã (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –°–µ—Å—Å–∏–æ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```bash
# –õ–æ–≥–∏–Ω —á–µ—Ä–µ–∑ Django admin –∏–ª–∏ API
POST /api/auth/login/
```

### –¢–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω
POST /api/auth/token/
{
    "username": "your_username",
    "password": "your_password"
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
Authorization: Token your_token_here
```

## üìä –ü–∞–≥–∏–Ω–∞—Ü–∏—è

–í—Å–µ —Å–ø–∏—Å–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é:
```json
{
    "count": 100,
    "next": "http://localhost:8000/api/books/?page=2",
    "previous": null,
    "results": [...]
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `page_size` - —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20)

## üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

### –ü–æ–∏—Å–∫
- `search` - —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º –ø–æ–ª—è–º
- `q` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ (–¥–ª—è –∫–Ω–∏–≥)

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –í—Å–µ –ø–æ–ª—è –º–æ–¥–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ª—è–º
- –ü—Ä–µ—Ñ–∏–∫—Å `-` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

## üìù –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–Ω–∏–≥–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
```bash
GET /api/books/?author=1&genre=2&ordering=-publication_year
```

### –ü–æ–∏—Å–∫ –∫–Ω–∏–≥
```bash
GET /api/books/?search=–≤–æ–π–Ω–∞ –º–∏—Ä
```

### –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤
```bash
POST /api/reviews/
{
    "book": 1,
    "rating": 5,
    "comment": "–û—Ç–ª–∏—á–Ω–∞—è –∫–Ω–∏–≥–∞!"
}
```

### –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–Ω–∏–≥–∏
```bash
GET /api/books/popular/
```

## üåê CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

API –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º:
- **–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã:**
  - `http://localhost:3000` (React dev server)
  - `http://127.0.0.1:3000`
  - `http://localhost:5173` (Vite dev server)
  - `http://127.0.0.1:5173`

- **–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:**
  - `Content-Type`
  - `Authorization`
  - `X-CSRFToken`
  - –ò –¥—Ä—É–≥–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Django —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   cd backend
   python manage.py runserver
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ API –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   ```
   http://localhost:8000/api/
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Browsable API –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   ```
   http://localhost:8000/api/books/
   ```

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

### React/Vue/Angular
```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥
fetch('http://localhost:8000/api/books/')
  .then(response => response.json())
  .then(data => console.log(data));

// –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤
fetch('http://localhost:8000/api/reviews/', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Token your_token_here'
  },
  body: JSON.stringify({
    book: 1,
    rating: 5,
    comment: '–û—Ç–ª–∏—á–Ω–∞—è –∫–Ω–∏–≥–∞!'
  })
});
```

### Axios
```javascript
import axios from 'axios';

const api = axios.create({
  baseURL: 'http://localhost:8000/api/',
  headers: {
    'Content-Type': 'application/json'
  }
});

// –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
api.defaults.headers.common['Authorization'] = 'Token your_token_here';
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
1. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –≤ `api/serializers.py`
2. –°–æ–∑–¥–∞–π—Ç–µ ViewSet –≤ `api/views.py`
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ `api/urls.py`

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `settings.py`
- –§–∏–ª—å—Ç—Ä—ã –≤ `views.py`
- –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –≤ `serializers.py`
